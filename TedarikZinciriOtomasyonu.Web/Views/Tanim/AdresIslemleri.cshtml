@model TedarikZinciriOtomasyonu.VarlikKatmani.adres

@{
	ViewBag.Title = "Adres İşlemleri";
	var Il = ViewData["Il"] as SelectList;
	var Ilce = ViewData["Ilce"] as SelectList;
}

<section class="content-header">
	<div class="header-icon">
		<i class="fa fa-users"></i>
	</div>
	<div class="header-title">
		<h1>Adresler</h1>
		<small>Adres İşlemleri</small>
	</div>
</section>
<section class="content">
	<div class="row">
		<div class="col-sm-12">
			<div class="panel panel-bd lobidrag">
				<div class="panel-heading">
					<div class="btn-group" id="buttonlist">
						<a class="btn btn-add " href="~/Tanim/Adresler">
							<i class="fa fa-list"></i>  Adres Listesi
						</a>
					</div>
				</div>
				<div class="panel-body">

					@using (Html.BeginForm())
					{
						@Html.AntiForgeryToken()

						<div class="form-horizontal">
							@Html.ValidationSummary(true, "", new { @class = "text-danger" })
							<div class="form-group">
								@Html.LabelFor(model => model.IlKodu, "IlKodu", htmlAttributes: new { @class = "control-label col-md-2" })
								<div class="col-md-10">
									@Html.DropDownListFor(model => model.IlKodu, Il, new { @class = "form-control" })
									@Html.ValidationMessageFor(model => model.IlKodu, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								@Html.LabelFor(model => model.IlceKodu, "IlceKodu", htmlAttributes: new { @class = "control-label col-md-2" })
								<div class="col-md-10">
									@Html.DropDownListFor(model => model.IlceKodu, Ilce, new { @class = "form-control" })
									@Html.ValidationMessageFor(model => model.IlceKodu, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								@Html.LabelFor(model => model.AdresAciklama, htmlAttributes: new { @class = "control-label col-md-2" })
								<div class="col-md-10">
									@Html.EditorFor(model => model.AdresAciklama, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => model.AdresAciklama, "", new { @class = "text-danger" })
								</div>
							</div>

							<div class="form-group">
								<div class="col-md-offset-2 col-md-10">
									<input type="submit" value="Onayla" class="btn btn-default" />
								</div>
							</div>
						</div>
					}
				</div>
			</div>
		</div>
	</div>
</section>
@section Script
{
	<script>
        $("#IlKodu").change(function () {

            var ddlCountry = $(this);
            var countryId = ddlCountry.val();

            if (countryId != "" || countryId != "-1") {

                $("#IlceKodu option").remove();

                $.ajax({
                    method: "GET",
                    url: '@Url.Action("IleGoreIlceSec", "Panel")' + '/' + countryId
                }).done(function (result) {

                    var ddlCity = $("#IlceKodu");

                    for (var i = 0; i < result.length; i++) {
                        var cityName = result[i].IlceAdi;
                        var cityId = result[i].IlceKodu;
                        var opt = $("<option></option>");

                        opt.text(cityName);
                        opt.attr("value", cityId);

                        ddlCity.append(opt);
                    }
                })
            }
            else {
                $("#IlceKodu option").not(":first").remove();
            }
        });
	</script>
}